{% extends 'base.html.twig' %}

{% block title %}Shopping Cart - Shop{% endblock %}

{% block stylesheets %}
<style>
    .shop-header {
        background-color: #fb6340;
        padding: 50px 0;
        margin-bottom: 40px;
    }
    .shop-header h1 {
        color: white;
        font-weight: bold;
    }
    .cart-card {
        background-color: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        margin-bottom: 40px;
    }
    .cart-item {
        padding: 20px;
        border-bottom: 1px solid #f5f5f5;
    }
    .cart-item:last-child {
        border-bottom: none;
    }
    .cart-item-image {
        width: 100px;
        height: 100px;
        object-fit: cover;
        border-radius: 8px;
    }
    .cart-item-details h4 {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 5px;
        color: #344767;
    }
    .cart-item-price {
        font-size: 16px;
        color: #fb6340;
        font-weight: bold;
    }
    .cart-quantity {
        width: 60px;
        text-align: center;
    }
    .cart-summary {
        padding: 20px;
        background-color: #f8f9fa;
    }
    .cart-summary h3 {
        color: #344767;
        font-weight: bold;
        margin-bottom: 20px;
    }
    .cart-total {
        font-size: 24px;
        color: #fb6340;
        font-weight: bold;
        margin-top: 20px;
    }
    .checkout-btn {
        background-color: #fb6340;
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 5px;
        transition: background-color 0.3s;
        font-weight: bold;
    }
    .checkout-btn:hover {
        background-color: #fa3a2e;
        color: white;
    }
    .continue-shopping {
        background-color: #67748e;
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 5px;
        transition: background-color 0.3s;
    }
    .continue-shopping:hover {
        background-color: #5c677d;
        color: white;
    }
    .remove-btn {
        background-color: #f5365c;
        color: white;
        border: none;
        padding: 6px 10px;
        border-radius: 5px;
        transition: background-color 0.3s;
        font-size: 14px;
    }
    .remove-btn:hover {
        background-color: #d63553;
        color: white;
    }
    .empty-cart {
        padding: 40px 20px;
        text-align: center;
    }
    .empty-cart h3 {
        color: #344767;
        margin-bottom: 20px;
    }
    .empty-cart p {
        color: #67748e;
        margin-bottom: 30px;
    }
    .alert {
        margin-bottom: 20px;
        border-radius: 5px;
        padding: 15px;
    }
    .alert-success {
        background-color: #2dce89;
        color: white;
        border: none;
    }
    .cart-badge {
        position: relative;
        top: -8px;
        right: 5px;
        background-color: #fb6340;
        color: white;
        border-radius: 50%;
        padding: 4px 8px;
        font-size: 12px;
    }
</style>
{% endblock %}

{% block body %}
<div class="shop-header">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <h1>Your Shopping Cart</h1>
                <p class="text-white">Review your items before checkout</p>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-12">
            {% for label, messages in app.flashes %}
                {% for message in messages %}
                    <div class="alert alert-{{ label }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endfor %}
        </div>
    </div>
    
    {% if cartItems|length > 0 %}
        <div class="row">
            <div class="col-lg-8">
                <div class="cart-card">
                    {% for item in cartItems %}
                        <div class="cart-item">
                            <div class="row align-items-center">
                                <div class="col-md-2">
                                    {% if item.product.image %}
                                        <img src="{{ asset('uploads/products/' ~ item.product.image) }}" class="cart-item-image" alt="{{ item.product.nameproduct }}">
                                    {% else %}
                                        <img src="{{ asset('assets/images/default-product.png') }}" class="cart-item-image" alt="Default Image">
                                    {% endif %}
                                </div>
                                <div class="col-md-4">
                                    <div class="cart-item-details">
                                        <h4>{{ item.product.nameproduct }}</h4>
                                        <div class="cart-item-price">{{ item.product.priceproduct }} €</div>
                                        <div>Category: {{ item.product.category|capitalize }}</div>
                                    </div>
                                </div>
                                <div class="col-md-2 text-center">
                                    <div class="quantity">
                                        <span>Qty: {{ item.quantity }}</span>
                                    </div>
                                </div>
                                <div class="col-md-2 text-center">
                                    <div class="item-total">
                                        <strong>{{ item.total }} €</strong>
                                    </div>
                                </div>
                                <div class="col-md-2 text-center">
                                    <a href="{{ path('app_shop_cart_remove', {'id': item.id}) }}" class="btn remove-btn">
                                        <i class="icon-trash"></i> Remove
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="cart-card">
                    <div class="cart-summary">
                        <h3>Order Summary</h3>
                        
                        <div class="d-flex justify-content-between mb-2">
                            <span>Subtotal</span>
                            <span>{{ total }} €</span>
                        </div>
                        
                        <div class="d-flex justify-content-between mb-2">
                            <span>Shipping</span>
                            <span>Free</span>
                        </div>
                        
                        <hr>
                        
                        <div class="d-flex justify-content-between cart-total">
                            <span>Total</span>
                            <span>{{ total }} €</span>
                        </div>
                        
                        <div class="mt-4">
                            <button class="btn checkout-btn w-100">Proceed to Checkout</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% else %}
        <div class="row">
            <div class="col-12">
                <div class="cart-card">
                    <div class="empty-cart">
                        <h3>Your cart is empty</h3>
                        <p>Looks like you haven't added any products to your cart yet.</p>
                        <a href="{{ path('app_shop') }}" class="btn continue-shopping">
                            <i class="icon-arrow-left"></i> Continue Shopping
                        </a>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
    
    {% if cartItems|length > 0 %}
        <div class="row mb-5">
            <div class="col-12">
                <div class="text-center mt-3 mb-5">
                    <a href="{{ path('app_shop') }}" class="btn continue-shopping">
                        <i class="icon-arrow-left"></i> Continue Shopping
                    </a>
                </div>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %} 